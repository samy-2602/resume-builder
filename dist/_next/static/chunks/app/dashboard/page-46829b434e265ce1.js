(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{31208:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>R});var a=t(95155),r=t(12115),i=t(35695),l=t(35317),n=t(98915),d=t(94861),c=t(97168),o=t(6874),m=t.n(o),u=t(84616);function h(e){let{heading:s,text:t,children:r}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:s}),t&&(0,a.jsx)("p",{className:"text-muted-foreground",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[r,(0,a.jsx)(m(),{href:"/resume/new",children:(0,a.jsxs)(c.$,{className:"bg-gradient-to-r from-cyan-600 to-violet-600 hover:from-cyan-700 hover:to-violet-700 text-white transition-all duration-300 shadow-md hover:shadow-lg group",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4 transition-transform group-hover:rotate-90"}),"New Resume"]})})]})]})}var x=t(77728),p=t(25561),f=t(60760),g=t(89677),j=t(44020),y=t(13717),v=t(91788),N=t(74126),w=t(57434),b=t(38564),A=t(67133),k=t(14503);function S(e){let{resumes:s,onDelete:t}=e,{user:i}=(0,d.A)(),{toast:o}=(0,k.dj)(),[u,h]=(0,r.useState)(null),[x,S]=(0,r.useState)(s),[C,E]=(0,r.useState)(null),P=async e=>{if(i&&!C){E(e);try{await (0,l.kd)((0,l.H9)(n.db,"users",i.uid,"resumes",e)),S(s=>s.filter(s=>s.id!==e)),null==t||t(e),o({title:"Resume deleted",description:"Your resume has been deleted successfully."})}catch(e){console.error("Error deleting resume:",e),o({title:"Error",description:"Failed to delete resume. Please try again.",variant:"destructive"})}finally{E(null)}}},_={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,a.jsx)(p.P.div,{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 auto-rows-max",variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",children:(0,a.jsx)(f.N,{mode:"popLayout",children:x.map(e=>(0,a.jsx)(p.P.div,{variants:_,layout:!0,className:"group relative h-full",whileHover:{scale:1.02,zIndex:1},onHoverStart:()=>h(e.id),onHoverEnd:()=>h(null),exit:{scale:.8,opacity:0},children:(0,a.jsxs)("div",{className:"relative h-full rounded-xl border bg-card p-6 hover:shadow-lg transition-all duration-300",children:[(0,a.jsx)("div",{className:"absolute right-2 top-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:(0,a.jsxs)(A.rI,{children:[(0,a.jsx)(A.ty,{asChild:!0,children:(0,a.jsxs)(c.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,a.jsxs)(A.SQ,{align:"end",className:"w-[160px]",children:[(0,a.jsx)(A._2,{asChild:!0,children:(0,a.jsxs)(m(),{href:"/resume/edit/".concat(e.id),className:"flex items-center",children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Edit"]})}),(0,a.jsx)(A._2,{asChild:!0,children:(0,a.jsxs)(m(),{href:"/resume/preview/".concat(e.id),className:"flex items-center",children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Download PDF"]})}),(0,a.jsxs)(A._2,{className:"text-red-600 focus:text-red-600 cursor-pointer",onClick:()=>P(e.id),disabled:C===e.id,children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"}),C===e.id?"Deleting...":"Delete"]})]})]})}),(0,a.jsx)(m(),{href:"/resume/edit/".concat(e.id),className:"block h-full",children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"rounded-full p-3 bg-gradient-to-br from-cyan-100 to-violet-100 dark:from-cyan-900 dark:to-violet-900 shrink-0",children:(0,a.jsx)(w.A,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h3",{className:"font-medium leading-tight group-hover:text-cyan-600 transition-colors mb-1 line-clamp-1",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2 break-words",children:e.template})]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 flex items-center justify-between text-xs text-muted-foreground border-t",children:[(0,a.jsxs)("span",{className:"truncate",children:["Updated ",(0,g.m)(new Date(e.updatedAt),{addSuffix:!0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 shrink-0 ml-2",children:[(0,a.jsx)(b.A,{className:"h-3 w-3 fill-amber-400 text-amber-400"}),(0,a.jsx)("span",{children:"Template"})]})]})]})}),(0,a.jsx)(p.P.div,{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-cyan-600 to-violet-600 rounded-b-xl",initial:{scaleX:0},animate:{scaleX:+(u===e.id)},transition:{duration:.2}})]})},e.id))})})}function C(){return(0,a.jsxs)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col items-center justify-center rounded-lg border border-dashed border-gray-300 dark:border-gray-700 p-8 text-center mt-6",children:[(0,a.jsx)("div",{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-cyan-100 dark:bg-cyan-900",children:(0,a.jsx)(w.A,{className:"h-10 w-10 text-cyan-600 dark:text-cyan-400"})}),(0,a.jsx)("h3",{className:"mt-6 text-2xl font-semibold",children:"No resumes yet"}),(0,a.jsx)("p",{className:"mt-2 text-center text-gray-500 dark:text-gray-400 max-w-sm",children:"You haven't created any resumes yet. Start by creating your first ATS-optimized resume."}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(m(),{href:"/resume/new",children:(0,a.jsxs)(c.$,{className:"bg-gradient-to-r from-cyan-600 to-violet-600 hover:from-cyan-700 hover:to-violet-700 text-white transition-all duration-300 shadow-md hover:shadow-lg group",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4 transition-transform group-hover:rotate-90"}),"Create Resume"]})})})]})}var E=t(4829),P=t(88482),_=t(27737);function R(){let{user:e,loading:s}=(0,d.A)(),t=(0,i.useRouter)(),[c,o]=(0,r.useState)([]),[m,u]=(0,r.useState)(!0),[g,j]=(0,r.useState)(""),[y,v]=(0,r.useState)("desc");(0,r.useEffect)(()=>{s||e||t.push("/login")},[e,s,t]);let N=async()=>{if(e)try{let s=(0,l.rJ)(n.db,"users",e.uid,"resumes"),t=(0,l.P)(s,(0,l.My)("updatedAt",y)),a=await (0,l.GG)(t),r=[];a.forEach(e=>{r.push({id:e.id,title:e.data().title,template:e.data().template,updatedAt:e.data().updatedAt,createdAt:e.data().createdAt})}),o(r)}catch(e){console.error("Error fetching resumes:",e)}finally{u(!1)}};(0,r.useEffect)(()=>{e&&N()},[e,y]);let w=c.filter(e=>e.title.toLowerCase().includes(g.toLowerCase()));return s||!e?(0,a.jsx)(x.R,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(_.E,{className:"h-8 w-[200px]"}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(e=>(0,a.jsx)(_.E,{className:"h-[200px] rounded-lg"},e))})]})}):(0,a.jsx)(x.R,{children:(0,a.jsxs)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsx)(h,{heading:"My Professional Resumes",text:"Create, edit and manage your free ATS-optimized resumes.",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search your resumes...","aria-label":"Search resumes",className:"px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all",value:g,onChange:e=>j(e.target.value)}),(0,a.jsxs)("select",{value:y,onChange:e=>v(e.target.value),"aria-label":"Sort resumes",className:"px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-all",children:[(0,a.jsx)("option",{value:"desc",children:"Newest first"}),(0,a.jsx)("option",{value:"asc",children:"Oldest first"})]})]})}),(0,a.jsx)("div",{role:"main","aria-label":"Resume list",children:(0,a.jsx)(f.N,{mode:"wait",children:m?(0,a.jsx)(E.G,{}):0===w.length?(0,a.jsx)(p.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:(0,a.jsx)(C,{})}):(0,a.jsx)(p.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:(0,a.jsx)(P.Zp,{className:"p-6",children:(0,a.jsx)(S,{resumes:w,onDelete:e=>{o(s=>s.filter(s=>s.id!==e))}})})})})})]})})}},90667:(e,s,t)=>{Promise.resolve().then(t.bind(t,31208))}},e=>{var s=s=>e(e.s=s);e.O(0,[992,118,352,236,530,843,348,745,463,441,684,358],()=>s(90667)),_N_E=e.O()}]);